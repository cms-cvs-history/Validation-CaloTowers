process HCALDIGIVALIDATIONHB  = {
include "Validation/CaloTowers/test/CaloTowersValidation.cfi"

 	 include "Geometry/CaloEventSetup/data/CaloTopology.cfi"
 	 es_module = HcalTopologyIdealEP {}

      es_module = CaloTowerConstituentsMapBuilder {
         untracked string MapFile="Geometry/CaloTopology/data/CaloTowerEEGeometric.map.gz"
      }

replace PoolSource.maxEvents = -1
replace PoolSource.fileNames = {'file:/afs/cern.ch/cms/data/CMSSW/Validation/HcalDigis/data/simhits_pi+100_etaphi244.root'}
replace hcalDigis.doNoise = true
replace myanalyzer.outputFile = 'CaloTowersValidationHEnoise.root'
replace ecalUnsuppressedDigis.doNoise = true
replace ecalUnsuppressedDigis.doESNoise = true

## Zero suppresion , Selective ReadOut
#replace ecalWeightUncalibRecHit.EBdigiCollection = ecalDigis:ebDigis
#replace ecalWeightUncalibRecHit.EEdigiCollection = ecalDigis:eeDigis
	 
## No ZP and SR
replace ecalWeightUncalibRecHit.EBdigiCollection = ecalUnsuppressedDigis
replace ecalWeightUncalibRecHit.EEdigiCollection = ecalUnsuppressedDigis


include "RecoJets/JetProducers/data/CaloTowerSchemeB.cfi"
 
 path p = { mix,hcalDigis, ecalDigiSequence,  ecalLocalRecoSequence , hbhereco ,hfreco, horeco, towerMaker, myanalyzer }
}
  
